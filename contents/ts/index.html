<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Bootstrap core CSS -->
    <link href="../../app/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../jumbotron.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <title>Manabu's Angular Typescript World</title>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/index.html">iManabu's Dev World</a>
        </div>
        <!--<div id="navbar" class="navbar-collapse collapse">-->
        <!--<form class="navbar-form navbar-right">-->
        <!--<div class="form-group">-->
        <!--<input type="text" placeholder="Email" class="form-control">-->
        <!--</div>-->
        <!--<div class="form-group">-->
        <!--<input type="password" placeholder="Password" class="form-control">-->
        <!--</div>-->
        <!--<button type="submit" class="btn btn-success">Sign in</button>-->
        <!--</form>-->
        <!--</div>&lt;!&ndash;/.navbar-collapse &ndash;&gt;-->
    </div>
</nav>
<div class="jumbotron">
    <div class="container">
        <div class="row">
	        <div class="col-md-2">
				      
	        </div>
		    <div class="col-md-7">
				<h1>Typescript and AngularJS</h1>
	        </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <h1>Why Bother with TypeScript?</h1>
        <ul>
            <li>For the people who have been working mostly in typed OO language world, JavaScript and its environment is very confusing.
            We love the world where there are classes, publics, privates, interfaces, and strict type checking, and of course
            because of that, our IDEs are much predictable to use.</li>
            <li>ECMAScript 6 is great, it's quite similar to TypeScript too. But, it will be many years before
            the script will be supported widely. Especially in slow moving places like hospital enterprises.</li>
            <li>We can write to ES6 and translate it to ES5. Or do the same with TypeScript today. And in case
            ES6 picks up, my TS will translate properly and still be able to target ES5. So if I pick the target agnostic language I'd be
            better off for me in a longer run.</li>
            <li>Upcoming Angular 2 is written in TypeScript. That's one more reason why I am excited.</li>
            <li>I am from the C# background mostly and TypeScript looks and feels close to C#. It is supported by major players so I feel a bit more safe about using it (though that could
            easily be my famous last word.)</li>
            <li>In terms of why not just use "JavaScript." I do agree but I do not fully buy the argument by some JS purists. 
            I know, it is very important for you to know how JavaScript works. You will be thrown into JS while debugging TS. 
            But my main argument is that we all use high-level languages anything from PHP to Python to Swift to Scala. 
            Technically, you can write anything in C and core of most these language systems are likely to have been written in C and as for myself, I did even write CPU microcode with it. 
            So while it is important for everyone to understand as basic of a thing like C (or assembly), for everyday industrial-strength programming I go as high level as I see fit. 
            I would pick whatever gets your job done in the shortest amount of time and get others, who wind up maintaining your code, into less trouble. Even if it's a bit slower,
            get it reliable first before you optimize any of it.
            For these reasons I like TypeScript, C#, Python, and Scala and that's what I use everyday.</li>	
        </ul>
        <h1>Installation and Initial Configurations</h1>
        <h2>What Tools and Why I Recommend Those</h2>
        <ul>
            <li>If you are going to be a programmer making bucks then the tools are important. I pick WebStorm or the Visual Studio. Microsoft Code is nice but Intellisense
                especially detection and code analysis within HTML is not quite there. WebStorm can even do the code analysis of the HTML file for Angular code,
            so it is the best of all.</li>
            <li>Be sure to use the latest version of the compiler (as of August 2015 it was 1.5.3) </li>
        </ul>
        <h2>Installation of TypeScript</h2>
        The following information is actually documented well. Nevertheless, I did get "stuck" with these issues
        when I was trying to make myself familiar with it. So they might also help you.
        <ol>
            <li>Install Node.js This installs also npm which we will need for subsequent configurations. </li>
            <li><code>sudo npm install -g tsc</code> Installs Typescript compiler. If you are on windows omit sudo but you
            have to be an admin user.</li>
            <li><code>sudo npm install -g tsd</code> Installs the Typescript definition manager.
            This is needed to import the "intellisense" definitions for Visual Studio and WebStorm.</li>
            <li>Install bower by <code>npm install -g bower</code> Most packages use this to install js and css</li>
            <li>Nobody knows what the Gulp is except the people who use Gulp. 
            The web site is like a Unix man page. It does not tell you what it is but it does tell you what it does. 
            Perhaps, it tries to replace Grunt. I am sure you would be forced to use Gulp some day. Do note that if
            you are using Gulp, it seems to require the installation both on local npm repository
            on your project as well as on the global repository on your system, so you need to run 
            <code>npm install gulp</code> without the -g option once you create a project.
            <li>The best browser for Angular is Chrome, also install <b>Angular Batarang</b> from the
        Chrome Appstore, which gives you more diagnostics capabilities, notably the $scope dump
        from the browser debugger.</li>
        </ol>
        <h2>Initial Setup</h2>
        <ul>
            <li>Start with the plain Angular Seed project. It contains handy package.json</li>
            <li>At the root of the seed project do <code>npm install</code> This will install most of what you will need</li>
            <li>If you are using bootstrap either do <code>bower install bootstrap</code> or edit bower.json and add
            <code>"bootstrap": "~3.3.5"</code></li>
            <li>If you are only developing in the app directory <code>cd app</code>, otherwise I would create the
            typings files at the root by not cd to app.</li>
            <li>Now the most of the stuff is set up, bring in the type def files by<br/>
            <code>tsd install "angular*"</code> Granted this will install a whole lot of stuff you may not need
            you could save a lot of time not needing to cherry-pick each definition.</li>
            <li>Now that the files are in place you can include the reference to the 'd' files by doing things like
            <code>/// &lt;reference path="../scripts/typings/angularjs/angular.d.ts" /&gt; at the start
            of your ts source code.</code></li>
        </ul>
        <h2>Clearing Initial Confusions Especially If You Are From the C# or Java World</h2>
        <p>
	        <ul>
		        <li>Consider the "module" keyword as the namespace in C#. This has nothing related to the Angular module
			        names, which is provided as a string parameter when constructing the app.</li>
			    <li>Within the class the user of "this." is required to refer to anything within the class.</li>
			    <li>There seemingly a lack of "new" in most parts of the Angular code. This is because 
			    most things are injected into the Angular framework then the label to the injected item is assigned to them
			    as a string. If you get the idea of this, then you will feel much better! </li>
			    <li>You will be calling a class member from your HTML code. A typical approach to do this is to
			    assign the instance of class (injected into the app of course) into $scope. Furthermore, in order
			    to do this, you'd first define an Interface class which holds the Model of the data the $scope can have
			    and within that you'd assign the "pointer" to the class instance. You see this done in the todomvc example
			    code.</li> 
	        </ul>
        </p>
        <h2>The Best Angular/Typescript Example</h2>
        <h3>todomvc.com The Prototypical TODO App sample in All Different Frameworks</h3>
        <p>
	        So far, I have found that the <a href="http://todomvc.com/examples/typescript-angular/#/" target="_blank">todo MVC examples</a> web site provides a more complete example of how Typescript can be
	        integrated with the AngularJS framework. I plan to write a more complete step-by-step study
	        of the examples given. Also, this site contains the same implementation on various other
	        frameworks including Angular2, Knockout etc. It is a great way to compare the strength of each  
	        framework.
        </p>
        <p>I have <a href="https://docs.google.com/document/d/1DaSv9oVzsmwLEGQAgpBAGW9ZxH5yQTX4RVQdsW7tUro/edit?usp=sharing" target=_blank>written up some additional observations</a> on the code, especially where I got stuck or got confused.</p>
        <h3>Kode Yak Blog</h3>
        <p>
	        The <a href="https://kodeyak.wordpress.com/2014/02/12/angularjs-via-typescript-controllers" target="_blank">Kode Yak blog</a> has 5 different blog posts in a series describing how to write an AngularJS app 
	        using Typescript. This was helpful in understanding how to set up Modules and Services 
	        in TS and also it contains a section of HTTP Service and how to deal with Promise.
        </p>
        <p>
	        If you have not done much of Angular programming at all, the HTTP I/O is done asynchronously. Obviously it 
	        should, otherwise, you cannot gain the user experience you intended to get. But, it will throw
	        you off since, for example, in a $http callback, you might not be able to interact with the $scope.
        </p>
        <h2>Yeoman TypeScript Generator - Code Scaffolding</h2>
        <p>Look at <a href="https://www.npmjs.com/package/generator-angular-typescript#controller" target="_blank">
        Yeoman Angular Generator</a> and you can scaffold most of what you will need to build an app.</p>
       
        <p>There are some issues with those documents, so I would like to explain how I got around the issues now.
        <ul>
	        <li>You do have to have ruby because it uses the compass web server. You also need to install
	        the compass most likely by <code>sudo gem install compass</code></li>
	        <li>You do also have to use <code>npm install generator-angular-typescript</code>. The documentation is wrong.</li>
	        <li>The yo command are not correct. You do have to add --typescript (note -- not a -) <code>yo angular-typescript --typescript</code></li>
	        <li>If you do a <code>grunt</code> to build the dist, then you might run into issues where you could get an error message
	        similar to <code>/Users/manabutokunaga/mytodo/node_modules/grunt-usemin/lib/config/uglifyjs</code>. If you do get
	        this message, edit the Gruntfile.js and look for flow: and several lines under it you find <code>js: ['concat', 'ugilfyjs']
	        </code>. Depending on which version or the generator you downloaded (it is about to be fixed to uglifyjs) you 
	        may need to revert 'uglifyjs' to just 'uglifyjs'. When they update it, it will break again and at that point
	        you will need to fix it back to uglifyjs. Just look in the directory where it says the missing and you know
	        which one to go for.
	       
        </ul>
        <h2>The Answer to MyTodo Homework Question</h2>
        <p>If you are going through the Yeoman mytodo tutorial, and still wondering why the duplicate list items do not work in the example, then the answer
	        is that because it is using the item's string in the $todo list as the key. There is one way to get around this by specifying to track the list by 
	        another key. The <code>ng-repeat</code> directive documents in <a href="https://docs.angularjs.org/error/ngRepeat/dupes" target=_blank>Angular.js</a> site tells you this. 
	        In this case the $index is the key field to force. So make the following change<p><code>ng-repeat="todo in todos track by $index</code> and 
	        it not only works right but you can also insert as many duplicates as you want, which is the behavior you would want in a ToDo list other than
	        preventing empty item from being added etc.</p>
     </div>
    <footer>
        <p>&copy; Manabu Tokunaga 2015 <a
                href="https://docs.google.com/forms/d/1cR8cKDf6Q7Zs43AbiyUERaqA-YIde-StQwEtAd8Q2S0/viewform">Contact
            Me</a></p>
    </footer>
</div>
</body>
</html>
